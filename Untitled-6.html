<html>
  <head> </head>
  <body>
    <script>
      // const Left = x => f => g => f(x);
      // const Right = x => f => g => g(x);
      // const either = e => f => g => e(f)(g);
      // const id = x => x;

      // const eShow = res => res(id)(g => "Result is: " + g);

      // const x_ = Math.random();
      // const safeDiv = num => divisor =>
      //   divisor === 0 ? Left("Cannot divide by 0") : Right(num / divisor);

      // console.log(
      //   eShow(safeDiv(1)(0)) === "Cannot divide by 0" &&
      //     eShow(safeDiv(x_)(1)) === "Result is: " + x_
      // );
      // const twice = x => x * 2;
      // console.log([1,2,3].map(twice).toString() === "2,4,6")

      // const divides = x => y => y % x === 0;
      // console.log([1,2,3,4,5,6].filter(divides(3)).toString() === "3,6")

      // const join = x => (accu, cur) => accu + x + cur;
      // console.log([1,2,3].reduce(join('-')))
      // console.log([1,2,3].reduce(join('-')) === '1-2-3')

      //const bonusFormula = x => x.revenue * 0.2;
      // const bonusFormula = employee => employee.revenue * 0.2

      //const bonusCalculation = x => e.bonus = eval(bonusFormula(x));

      //let bonusCalculation = (employee) => employee.bonus = eval(bonusFormula)

      //const bonusCalculation = Function(e.bonus = bonusFormula(e.revenue));

      // function bonusCalculation (employee) {
      //   let usrFunc = Function('employee', 'return ' + bonusFormula);
      //   employee.bonus = usrFunc(employee);
      // }

      // let bonusCalculation = (employee) => {
      //     let f = Function('employee', 'return ' + bonusFormula);
      //     employee.bonus = f(employee)
      // }

      // const e = {revenue: 10000, bonus: null};
      // bonusCalculation(e);
      // const factor_ = 0.2;
      // console.log(e.bonus === e.revenue * factor_);

      // true: 1, 3

      // function Empty() { }

      // // const Empty = ( () => {
      // //   function Empty() { }
      // //   return Empty;
      // // }) ();

      // const empty = new Empty;
      // // const also = new Empty;

      // Empty.prototype.answer = 42;

      // // document.writeln(
      // //   empty.answer === 42 && also.answer === 42
      // // );

      // document.writeln(empty.answer === 42);

      // const Person = name => {
      //   let age = 0;
      //   return {
      //     getAge: () => age,
      //     setAge: newAge => age = newAge,
      //     getName: () => name,
      //     setName: newName => name = newName
      //   }
      // };

      // const me = Person("Myself");
      // //me.name = "***"
      // me.setName("Sherlock");
      // document.writeln(me.getName() === "Sherlock")

      // Person.prototype.getName = function() {  // functions are shared through the prototype // "=>" not allowed!
      //       return this.firstname + " " + this.lastname;
      // };

      // Array.prototype.eq = function(y) {
      //   if (this.length !== y.length){
      //     return false;
      //   }
      //   for (let i = 0; i < this.length; i++){
      //     if (this[i] !== y[i]){
      //       return false;
      //     }
      //   }
      //   return true;
      // };

      // function eq (x, y) {
      //   return x.length == y.length;
      // }

      // xs1_ = [1,2,3]
      // ys1_ = [1,2,3]
      // xs2_ = [1,2,3,4,5]
      // ys2_ = [1,2,2]
      

      // document.writeln(
      //   xs1_.eq(ys1_) &&
      //   !xs1_.eq(xs2_) &&
      //   !ys1_.eq(ys2_)

        // xs1_.eq(ys1_) &&
        //   !xs2_.eq(ys2_) &&
        //   xs3_.eq(ys3_) &&
        //   !xs3_.eq(ys4_) &&
        //   !xs4_.eq(ys3_)
      // );

      // 3 4 6 zweitletztes

      // class Person {
      //   isCool() {
      //     return this.name.length > 3;
      //     //return name === 'Dierk'
      //   }
      // }

      // const p = new Person();
      // p.name = "Dierk";
      // //document.writeln(p.name === "Dierk")
      // // const joe = {
      // //   name: "joe",
      // //   cool: p.isCool
      // // };
      // //p.isCool = () => true;
      // //Person.prototype.isCool = () => true;
      // document.writeln(p.isCool())
      // //document.writeln(joe.cool())

        // richtig 1 2 4 6 7 8 9

      // class Person {
      //   constructor(name) {
      //     this.name = name;
      //   }
      //   isCool() {
      //     return this.name.length > 3
      //   }
      // }
      // const p = new Person("Dierk");
      // document.writeln(p instanceof Person);

      // class Person { }
      // class Student extends Person { }
      // // // const p = { };
      // // // Object.setPrototypeOf(p, Person.prototype);
      // // // document.writeln(p instanceof Person);
      // // // class Student extends Person {}
      // const s = new Student();
      // //Object.setPrototypeOf(Student.prototype, Person.prototype)
      // document.writeln(s instanceof Person);

//       Q16a
// Assignment: Function composition
// Attempt number 1 of at most 3 attempts

// JavaScript is functional and functional languages should provide function composition.
// Let's assume we have functions like
//  const inc    = x => x + 1;
//  const double = x => x * 2;
// Provide a general function 'then' that can combine _any_ such functions such that
//  inc.then(double).then(double)
// can be used like
//  inc.then(double).then(double) (1) === 8  

// Note: you cannot assume what the functions are actually doing. 
// It must work for all functions!

// Remaining chars: 512
// Your solution will be tested against:

// add.then(mult).then(add) (1) === (1 + add_) * factor_ + add_

      // const inc    = x => x + 1;
      // const double = x => x * 2;

      // //try this first
      // Object.prototype.then = function(callback) {
      //   return () => callback(this)
      // }

      // Object.prototype.then = function(callback) {
      //   return (value) => callback(this(value))
      // }

      // document.writeln(inc.then(double).then(double) (1) === 8)


      // const Observable = value => {
      //   const listeners = [];
      //   return {
      //     onChange: callback => listeners.push(callback),
      //     getValue: () => value,
      //     setValue: val => {
      //       if (value === val) return;
      //       value = val;
      //       listeners.forEach(listener => listener(val));
      //     }
      //   }
      // }

      // true
      // const color = Observable('white');
      // let updateCount = 0;
      // color.onChange (_ => updateCount++);
      // color.setValue('black');
      // document.writeln( updateCount === 1 )

      // false
      // const color = Observable('white');
      // let observed = null;
      // color.onChange ( val => observed = val);
      // document.writeln( observed === color.getValue() )

      // false
      // const color = Observable('white');
      // let updateCount = 0;
      // color.onChange( _ => updateCount++);
      // color.setValue('white');
      // document.writeln(updateCount === 1)

      // true
      // const color = Observable('white');
      // document.writeln(color.getValue() === 'white')

      // true
      // const color = Observable('white');
      // color.setValue('black')
      // document.writeln(color.getValue() === 'black')

      // false
      // const color = Observable('white');
      // color.value = 'black'
      // document.writeln(color.getValue() === 'black')

      // true
      // const color = Observable('white');
      // let observed = color.getValue();
      // color.onChange(val => observed = val)
      // document.writeln(observed === color.getValue())

      // true
      // const color = Observable('white')
      // let updateCount = 0;
      // color.onChange( _ => updateCount++)
      // color.setValue('black')
      // color.setValue('white')
      // document.writeln(updateCount === 2)

      // false
      // const color = Observable('white')
      // let updateCount = 0;
      // const updateListener = val => updateCount++;
      // color.setValue('black')
      // document.writeln(updateCount === 1)

      // true
      // const color = Observable('white')
      // let observed = null;
      // color.onChange (val => observed = val)
      // color.setValue('black')
      // document.writeln(observed === color.getValue())

      const Observable = value => {
    const listeners = [];
    return {
        onChange: callback => {
            listeners.push(callback);
            callback(value, value);
        },
        getValue: ()       => value,
        setValue: newValue => {
            if (value === newValue) return;
            const oldValue = value;
            value = newValue;
            listeners.forEach(callback => callback(value, oldValue));
        }
    }
};

let sum = 0;                                 
const trackable = Observable(0);

// Use 'trackable' such that it keeps track of the sum of all values 
// that have been set to it in 'sum'.

trackable.onChange(val => sum = sum + val);

const x_ = 1;
const y_ = 2;
const z_ = 3;

trackable.setValue(x_); // values x_, y_, z_ are given. Do not override.
trackable.setValue(y_);
trackable.setValue(z_);

document.writeln(trackable.getValue() === z_ && sum === x_ + y_ + z_)

    </script>
  </body>
</html>
